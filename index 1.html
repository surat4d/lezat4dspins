<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>Angpao Hoki</title>

<style>
*{box-sizing:border-box;font-family:system-ui,Segoe UI,sans-serif}
html,body{margin:0;height:100%;background:#200;color:#fff;overflow:hidden}
body{background:radial-gradient(circle at top,#b30000,#220000)}

/* ===== COIN BG ===== */
.scene{position:fixed;inset:0;pointer-events:none;perspective:800px}
.coin3d{
 position:absolute;top:-40px;width:18px;height:18px;border-radius:50%;
 background:radial-gradient(circle,#fff6b0,#ffd700 40%,#a87700 70%);
 animation:fall linear infinite
}
@keyframes fall{
 to{transform:translateY(110vh) rotateX(720deg) rotateY(720deg)}
}

/* ===== LAYOUT ===== */
.wrapper{min-height:100%;display:flex;justify-content:center;align-items:center;padding:14px}
.card{width:100%;max-width:980px;display:grid;grid-template-columns:1fr 1.2fr;gap:18px}

/* ===== LEFT PANEL ===== */
.left{display:flex;flex-direction:column;justify-content:center;align-items:center;perspective:900px}

/* ===== LOGO & TEXT ===== */
.logo-section {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-bottom: 16px;
  text-align: center;
}
.logo-img {
  width: 320px;      
  height: auto;      
  object-fit: contain; 
  margin-bottom: 12px;
}
.logo-text {
  font-size: 16px;
  font-weight: 800;
  color: #ffd700;
  text-shadow: 0 0 8px #ffae00;
  line-height:1.2;
}

/* ===== ANGPAO ===== */
.angpao{
 width:220px;
 height:300px;
 position:relative;
 cursor:not-allowed;
 transform-style:preserve-3d;
 transition:transform 1s cubic-bezier(.2,.9,.2,1),opacity 0.5s;
 opacity:0.6;
}
.angpao.active{cursor:pointer;opacity:1}

.body{
 position:absolute;
 inset:0;
 border-radius:20px;
 background:linear-gradient(145deg,#ff3a3a,#990000);
 box-shadow:0 0 20px #ff0000 inset;
 overflow:hidden;
 transform-style:preserve-3d;
}

.half{
 position:absolute;
 width:50%;
 height:100%;
 top:0;
 background:inherit;
 transition:1s cubic-bezier(.2,.9,.2,1);
 transform-origin:center;
}
.left-half{left:0}
.right-half{right:0}

.seal{
 position:absolute;
 top:50%;
 left:50%;
 transform:translate(-50%,-50%);
 width:70px;
 height:70px;
 border-radius:50%;
 background:radial-gradient(circle,#ffd700,#b48a00);
 box-shadow:0 0 20px gold,0 0 40px gold inset;
 animation:glow 1.2s infinite alternate;
 z-index:10;
}

.flash{
 position:absolute;
 inset:-50%;
 background:radial-gradient(circle,gold,transparent 70%);
 opacity:0;
 z-index:5;
}

.angpao.open .left-half{transform:translateX(-140%) rotateY(-25deg) rotateX(10deg)}
.angpao.open .right-half{transform:translateX(140%) rotateY(25deg) rotateX(-10deg)}
.angpao.open .flash{animation:flash .9s}

@keyframes flash{40%{opacity:1}}
@keyframes glow{
 0%{box-shadow:0 0 20px gold,0 0 40px gold inset;}
 100%{box-shadow:0 0 35px gold,0 0 70px gold inset;}
}

/* ===== RIGHT PANEL ===== */
.right{
 background:rgba(255,0,0,.18);
 backdrop-filter:blur(14px);
 border-radius:20px;
 padding:22px;
 border:1px solid rgba(255,255,255,.15)
}
.title{font-size:22px;font-weight:800}
.sub{opacity:.85;margin-bottom:10px}
.input{width:100%;padding:14px;border-radius:12px;border:none;font-size:16px;margin-bottom:10px}
.btn{
 width:100%;padding:14px;border:none;border-radius:14px;
 background:linear-gradient(145deg,#ffd700,#b48a00);
 font-weight:800;opacity:.6
}
.btn.active{opacity:1;cursor:pointer}

/* ===== HISTORY ===== */
.history{
 margin-top:16px;
 background:rgba(120,0,0,.28);
 backdrop-filter:blur(16px);
 border-radius:18px;
 padding:14px;
 border:1px solid rgba(255,255,255,.12)
}
.history h3{margin:0 0 10px;font-size:18px}
.history ul{list-style:none;padding:0;margin:0;max-height:220px;overflow:hidden}
.history li{
 display:flex;justify-content:space-between;
 padding:8px 10px;border-radius:12px;
 font-size:14px;margin-bottom:6px;
 background:rgba(0,0,0,.25)
}
.history li.top{
 background:linear-gradient(145deg,#ffd700,#b48a00);
 color:#400;font-weight:900;
 box-shadow:0 0 18px gold;
 animation:pulse 1.2s infinite
}
@keyframes pulse{50%{transform:scale(1.04)}}

/* ===== POPUP ===== */
.popup{
 position:fixed;inset:0;
 background:rgba(0,0,0,.85);
 display:none;
 align-items:center;
 justify-content:center;
 z-index:999;
}

.popup-box{
 background:linear-gradient(145deg,#a00000,#5a0000);
 padding:28px;
 border-radius:18px;
 text-align:center;
 box-shadow:0 0 40px gold;
 position:relative;
 width:90%;
 max-width:400px;
}

.popup-box .close-btn{
 position:absolute;
 top:12px;
 right:12px;
 background:#ff4a4a;
 border:none;
 border-radius:50%;
 width:30px;
 height:30px;
 font-size:16px;
 font-weight:bold;
 cursor:pointer;
 color:#fff;
 box-shadow:0 0 10px red;
}

.claim-btn{
 margin-top:18px;
 padding:14px 28px;
 border:none;
 border-radius:16px;
 font-size:16px;
 font-weight:900;
 cursor:pointer;
 color:#4a0000;
 background:linear-gradient(145deg,#ffd700,#ffae00);
 box-shadow:0 0 25px gold;
 animation:claimPulse 1.2s infinite;
}

@keyframes claimPulse{
 50%{transform:scale(1.06)}
}

/* ===== MOBILE ===== */
@media(max-width:768px){
.card{grid-template-columns:1fr}
.angpao{width:170px;height:240px}
.logo-img{width:100px}
.logo-text{font-size:14px}
}
</style>
</head>
<body>

<div class="scene" id="scene"></div>

<div class="wrapper">
<div class="card">

<div class="left">

<!-- LOGO PNG + TEKS PROMOSI -->
<div class="logo-section">
  <img src="https://pancarkerja.com/images/logo.png" alt="Logo" class="logo-img">
  <div class="logo-text">
    BUKA ANGPAO MU DAN DAPATKAN UANG SALDO SAMPAI DENGAN 2JT!!
  </div>
</div>

<div class="angpao" id="angpao">
<div class="body">
<div class="half left-half"></div>
<div class="half right-half"></div>
<div class="seal"></div>
<div class="flash"></div>
</div>
</div>
</div>

<div class="right">
<div class="title">MASUKKAN ID ANDA</div>
<div class="sub">Masukkan USER ID untuk membuka Angpao</div>
<input id="userId" class="input" placeholder="USER ID">
<button id="openBtn" class="btn">BUKA ANGPAO</button>

<div class="history">
<h3>üßß Riwayat Hadiah Angpao</h3>
<ul id="historyList"></ul>
</div>
</div>

</div>
</div>

<div class="popup" id="popup">
  <div class="popup-box">
    <button class="close-btn" id="closePopup">X</button>
    <h2 id="prizeText"></h2>

    <button id="claimBtn" class="claim-btn">
      üéÅ KLAIM ANGPAO ANDA
    </button>

    <div class="claim-note">
      *Hadiah akan diproses otomatis
    </div>
  </div>
</div>

<audio id="openSound" src="https://assets.mixkit.co/active_storage/sfx/2766/2766-preview.mp3"></audio>
<audio id="jackpotSound" src="https://assets.mixkit.co/active_storage/sfx/2019/2019-preview.mp3"></audio>

<script>
/* ===== CONFIG ===== */
const BACKEND_URL="https://your-backend.com/api/angpao";
const CLAIM_URL = "https://pancarkerja.com/";
const prizePool=[
 {v:"Rp 250.000",w:45},
 {v:"Rp 500.000",w:30},
 {v:"Rp 750.000",w:15},
 {v:"Rp 1.000.000",w:8},
 {v:"Rp 2.000.000",w:2}
];

/* ===== UTIL ===== */
const $=id=>document.getElementById(id);
const timeNow=()=>new Date().toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"});

/* ===== WEIGHTED RNG ===== */
function pickPrize(){
 let t=prizePool.reduce((a,b)=>a+b.w,0),r=Math.random()*t;
 for(let p of prizePool){if((r-=p.w)<0)return p.v}
}

/* ===== ELEMENTS ===== */
const angpao=$("angpao"),btn=$("openBtn"),uid=$("userId");
const popup=$("popup"),prizeText=$("prizeText"),list=$("historyList");

/* ===== ENABLE ===== */
uid.oninput=()=>{ 
 let ok=uid.value.trim();
 angpao.classList.toggle("active",ok);
 btn.classList.toggle("active",ok);
};

/* ===== HISTORY INIT ===== */
function seedHistory(){
 list.innerHTML="";
 for(let i=0;i<12;i++){
  addHistory(`***${100+i}`,pickPrize(),false);
 }
}
seedHistory();

/* ===== ADD HISTORY ===== */
function addHistory(id,prize,isTop){
 const li=document.createElement("li");
 if(isTop) li.classList.add("top");
 li.innerHTML=`<span>${id} ‚Ä¢ ${prize}</span><span class="time">${timeNow()}</span>`;
 list.prepend(li);
 while(list.children.length>50) list.lastChild.remove();
}

/* ===== OPEN ===== */
function openAngpao(){
 const id=uid.value.trim();
 if(!id) return;

 if(localStorage.getItem("angpao_"+id)){
  alert("ID ini sudah pernah membuka angpao!");
  return;
 }
 localStorage.setItem("angpao_"+id,"1");

 const prize=pickPrize();
 $("openSound").play();
 angpao.classList.add("open");

 setTimeout(()=>{
  prizeText.innerText="SELAMAT! ANDA MENDAPAT "+prize;
  $("jackpotSound").play();
  popup.style.display="flex";
  addHistory(id,prize,true);
  syncBackend(id,prize);
 },1200);
}

angpao.onclick=openAngpao;
btn.onclick=openAngpao;

/* ===== BACKEND SYNC ===== */
function syncBackend(id,prize){
 fetch(BACKEND_URL,{
  method:"POST",
  headers:{"Content-Type":"application/json"},
  body:JSON.stringify({userId:id,prize,time:Date.now()})
 }).catch(()=>{});
}

/* ===== COINS ===== */
for(let i=0;i<35;i++){
 let c=document.createElement("div");
 c.className="coin3d";
 c.style.left=Math.random()*100+"vw";
 c.style.animationDuration=(3+Math.random()*4)+"s";
 $("scene").appendChild(c);
}

/* ===== POPUP BUTTONS ===== */
$("closePopup").onclick = ()=> popup.style.display="none";
$("claimBtn").onclick = ()=>{
 popup.style.display="none";
 setTimeout(()=>location.href=CLAIM_URL,300);
};
</script>

</body>
</html>
